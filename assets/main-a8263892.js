console.log("Script started successfully");const s={button1:{x:3,y:11,color:"red",pressed:!1},button2:{x:6,y:11,color:"red",pressed:!1},button3:{x:8,y:4,color:"red",pressed:!1},button4:{x:12,y:12,color:"red",pressed:!1},button5:{x:6,y:14,color:"blue",pressed:!1},button6:{x:10,y:4,color:"blue",pressed:!1},button7:{x:15,y:12,color:"blue",pressed:!1},button8:{x:15,y:14,color:"blue",pressed:!1}};WA.onInit().then(async()=>{console.log("Scripting API ready"),await WA.players.configureTracking({players:!0});for(const[e,{x:r,y:t}]of Object.entries(s))WA.room.area.create({name:e,x:r*32,y:t*32,width:32,height:32}),WA.room.area.onEnter(e).subscribe(()=>{WA.player.state.saveVariable("buttonPressed",e,{persist:!1,public:!0}),a()}),WA.room.area.onLeave(e).subscribe(()=>{WA.player.state.saveVariable("buttonPressed",void 0,{persist:!1,public:!0}),a()});WA.players.onPlayerEnters.subscribe(e=>{e.state.onVariableChange("buttonPressed").subscribe(()=>{a()})}),WA.players.onPlayerLeaves.subscribe(()=>{a()}),a()}).catch(e=>console.error(e));function a(){for(const l of Object.values(s))l.pressed=!1;let e=0,r=0;const t=[...WA.players.list(),WA.player];for(const l of t){const o=l.state.buttonPressed;typeof o=="string"&&(o==="button1"||o==="button2"||o==="button3"||o==="button4"||o==="button5"||o==="button6"||o==="button7"||o==="button8")&&(s[o].pressed=!0,s[o].color==="red"&&e++,s[o].color==="blue"&&r++)}d(),e>=2?(WA.room.showLayer("doors/red_door_opened"),WA.room.hideLayer("doors/red_door_closed")):(WA.room.hideLayer("doors/red_door_opened"),WA.room.showLayer("doors/red_door_closed")),r>=2?(WA.room.showLayer("doors/blue_door_opened"),WA.room.hideLayer("doors/blue_door_closed")):(WA.room.hideLayer("doors/blue_door_opened"),WA.room.showLayer("doors/blue_door_closed"))}function d(){let e=[];for(const{x:r,y:t,color:l,pressed:o}of Object.values(s))e.push({x:r,y:t,tile:l+(o?"_enabled":"_disabled"),layer:"buttons"});WA.room.setTiles(e)}
